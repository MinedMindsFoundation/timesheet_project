<!--user clock in and clockout page-->
<link rel= "stylesheet" href = "css/style.css">
<head>
    <div id="timeout">
    </div>
    <meta name="google-signin-client_id" content="529014474103-64pofb78h79be0rblagq6cil53svu4qb.apps.googleusercontent.com">
</head>
<!-- clock -->
<body onload="updateClock(); setInterval('updateClock()',1000)";>
<span id="clock">&nbsp;</span>
</body><br><br>
    <div>
        <%user_info.each do |row|%>
            <%=row%>
        <%end%>, welcome back!<br>
        <%=user_email%><br>
    </div>
<br>
Todays Time
     <table> 
            <th>Time in</th>
            <th>Lunch Start</th>
            <th>Lunch End</th>
            <th>Time out</th>
            <%todays_time.each do |item|%>
            <tr>
            <%item.each do |time|%>
                <%unless time == item[4]%>
                    <td><%if time.length == 5%>
                        <%=time_converter(time)%>
                        <%else%>
                        <%=time%>
                        <%end%>
                    </td>
                <%end%>
            <%end%>
            </tr>
            <%end%>
            </table>


<% if admin_check == "Yes" %><br>
        Users Checked In:<br>
    <div id="result">
        <!--Users who are clocked in-->
        <%user_checked.each do |row|%>
        <%time = live_time("#{row[2]} #{row[3]}",Time.now.strftime('%H:%M %Y-%m-%d'))%>
        <%=row[0].capitalize%> <%=row[1].capitalize%> <%="#{time[0]} :days #{time[1]} :hours #{time[2]} :min"%> <%=row[4]%><br>
        <%end%>
    </div><br>

    <!--message for the pto request-->
    <%=session[:pto_message]%><br>
    <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <!--Form to add users-->
    <form method = "post" action = "add_user">
    <button type = "submit">Add User</button>
    </form>

    <!--Form to Change or Delete Users-->
    <form method = "post" action = "edit_user">
    <button type = "submit">Edit Users</button>
    </form>

    <!--Form to see whos clocked in or out-->
    <form method = "post" action = "to_whos_in">
    <button type = "submit">Search User</button>
    </form></div>
    <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; open</span>

<% else %>
<% end %>



<%=session[:message]%><br>

<!-- form for submiting your time in -->
<center><form method = "post" action = "clock_in">
<select name="location">
        <option value="Clendenin">Clendenin</option>
        <option value="Beckley">Beckley</option>
        <option value="Waynesburg">Waynesburg</option>
    </select><br>
    <button id = "clock_in_button" type = "submit">Submit Time In</button>
    </form>

<!-- form for submiting your lunch start -->
<form method = "post" action = "lunch_in">
    <button type = "submit">Submit Lunch Start</button>
</form>

<!-- form for submiting your lunch end -->
<form method = "post" action = "lunch_out">
    <button type = "submit">Submit Lunch end</button>
    </form>

<!-- form for submiting yout time out -->
<form id = "time_submit" method = "post" action = "clock_out">
    <button id = "clock_out_button" type = "submit">Submit Time Out</button>
    </form><center>

<!--submit button fo vac request-->
<form method = "post" action = "vac_time_request">
<button type = "submit">PTO Request</button>
</form>

<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src = "/js/clock.js"></script>
<script src = "/js/facebook.js"></script>
<script src= "js/google_js.js"></script>

<!--sign out section--><br>

<!--toggle for sign out button-->
<%toggle = "social"%>

<%if toggle == "sso"%>

    <form method="post" action="logout">
    <input type="submit" name="submit" value="sign out">
    </form>
    <script src="/js/ssotimeout.js"></script>
    <body onload="ssoidleTimer()"></body>
    <%elsif toggle == "social"%>

    <!--social media section-->
        <!--facebook sign out--><br>
        <button id = 'sign_out' onclick= 'logout()' >Log Out</button>
            <!-- src = "/js/logout.js"-->
    <!--google sign out--><br>
        <!-- scr ="/js/google_js.js"-->
        <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
    <!--TIME OUT STUFF-->
    <script src="/js/timeout.js"></script>
            <body onload="idleTimer()"></body>
<%end%>
 
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   <script>
   function autoRefresh_div()
 {
      $("#result").load("/reload");// a function which will load data from other file after x seconds
  }
 
  setInterval('autoRefresh_div()', 5000); // refresh div after 5 secs
            </script>
            
            <!-- tabel of time in and out pay period --> 
            Pay Period: <%=pay_period[0]%> to <%=pay_period[1]%>
            <table>
            <th>Time in</th>
            <th>Lunch Start</th>
            <th>Lunch End</th>
            <th>Time out</th>
            <th>Date</th>
            <%times.each do |item|%>
            <tr>
            <%item.each do |time|%>
            <td><%if time.length == 5%>
                <%=time_converter(time)%>
                <%else%>
                <%=time%>
                <%end%>
            </td>
            <%end%>
            </tr>
            <%end%>
            </table>

            <!---func for nav bar--->

            <script>
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
            }
            
            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
            }
            </script>