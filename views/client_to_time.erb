<form method="post" action="client_hours">
    <%client_count = 1%>
    <%count = 1%>
        <div id = "week_box">
            Week <%=filing_week%>
            <table>

                <th>Clients</th>
                <th>Monday</th>
                <th>Tuesday</th>
                <th>Wednesday</th>
                <th>Thursday</th>
                <th>Friday</th>
                <th>Saturday</th>
                <th>Sunday</th>
                <th></th>
                <%clients.each do |client|%>
                    <tr>
                        <td><%=client%></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        <td><input onblur='getTotal(<%=count%>)' id = 'hours<%=count%>' type="number" name="hours_day<%=count%>[]" value="0" style = "width: 3em" min="0" max="24" required></td>
                        
                    </tr>
                    <%client_count += 1%>
                <%end%>
            </table>
            <input type = 'hidden' id ='total'>
            <div id= 'total'>
                Total:
                <div id ='totalbox<%=count%>'>
                </div>
            </div>
        </div><br><br>
        
        <table>
        <th>Expenses</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
        <th>Sunday</th>
        
        <tr>
            <td>Expenses (general)</td>
            <%7.times do%>
                <td><input type = "number" name = 'expenses[]' style ="width:3em;" step='0.01' value='0.00' placeholder='0.00' ></td>
            <%end%>
        </tr>
        
        <tr>
            <td>Expenses (Mileage)</td>
            <%7.times do%>
                <td><input type = "number" name = 'expenses[]' style ="width:3em;" step='0.01' value='0.00' placeholder='0.00' ></td>
            <%end%>
        </tr>
        
        <tr>
            <td>Mileage discription</td>
            <%7.times do%>
                <td><textarea name = 'expenses[]' style ="width:8em;height:5em;" value='' ></textarea></td>
            <%end%>
        </tr>
        
        <tr>
            <td>Expenses(tolls)</td>
            <%7.times do%>
                <td><input type = "number" name = 'expenses[]' style ="width:3em;" step='0.01' value='0.00' placeholder='0.00' ></td>
            <%end%>
        </tr>
        
        <tr>
            <td>other</td>
            <%7.times do%>
                <td><input type = "number" name = 'expenses[]' style ="width:3em;" step='0.01' value='0.00' placeholder='0.00' ></td>
            <%end%>
        </tr>
        </table>
        
        <%count +=1%>

    <input type="submit">
</form>

<script>
  function getTotal(count){
    var arr = document.getElementsByName('hours_day'+count+'[]');
    console.log(arr)

    var tot=0;
    for(var i=0;i<arr.length;i++){
        if(parseInt(arr[i].value))
            tot += parseInt(arr[i].value);
    }
    document.getElementById('total').value = tot;
    document.getElementById('totalbox' + count).innerHTML = tot;
}
</script>